<!DOCTYPE html><html><head><title>R: Recodes server-side variable values</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="../../assets/R.css" />
</head><body><div class="container">

<table width="100%"><tr><td>ds.recodeValues {dsBaseClient}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Recodes server-side variable values</h2>

<h3>Description</h3>

<p>This function takes specified values of elements in a vector and converts
them to a matched set of alternative specified values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ds.recodeValues(
  var.name = NULL,
  values2replace.vector = NULL,
  new.values.vector = NULL,
  missing = NULL,
  newobj = NULL,
  datasources = NULL,
  notify.of.progress = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr valign="top"><td><code>var.name</code></td>
<td>
<p>a character string providing the name of the variable to be recoded.</p>
</td></tr>
<tr valign="top"><td><code>values2replace.vector</code></td>
<td>
<p>a numeric or character vector specifying the values
in the variable <code>var.name</code> to be replaced.</p>
</td></tr>
<tr valign="top"><td><code>new.values.vector</code></td>
<td>
<p>a numeric or character vector specifying the new values.</p>
</td></tr>
<tr valign="top"><td><code>missing</code></td>
<td>
<p>If supplied, any missing values in var.name will be replaced by this value. 
Must be of length 1. If the analyst want to recode only missing values then it should also 
specify an identical vector of values in both arguments <code>values2replace.vector</code> and 
<code>new.values.vector</code>. Otherwise please look the <code>ds.replaceNA</code> function.</p>
</td></tr>
<tr valign="top"><td><code>newobj</code></td>
<td>
<p>a character string that provides the name for the output object
that is stored on the data servers.
Default <code>recodevalues.newobj</code>.</p>
</td></tr>
<tr valign="top"><td><code>datasources</code></td>
<td>
<p>a list of <code>DSConnection-class</code> 
objects obtained after login. If the <code>datasources</code> argument is not specified
the default set of connections will be used: see <code>datashield.connections_default</code>.</p>
</td></tr>
<tr valign="top"><td><code>notify.of.progress</code></td>
<td>
<p>logical. If TRUE console output should be produced to indicate
progress. Default FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function recodes individual values with new individual values. This can
apply to numeric and character values, factor levels and NAs. One particular use of
<code>ds.recodeValues</code> is to convert NAs to an explicit value. This value is specified
in the argument <code>missing</code>. If tthe user want to recode only missing values, then it
should also specify an identical vector of values in both arguments <code>values2replace.vector</code>
and <code>new.values.vector</code> (see Example 2 below).
Server function called: <code>recodeValuesDS</code>
</p>


<h3>Value</h3>

<p>Assigns to each server a new variable with the recoded values. 
Also, two validity messages are returned to the client-side 
indicating whether the new object has been created in each data source and if so whether
it is in a valid form.
</p>


<h3>Author(s)</h3>

<p>DataSHIELD Development Team
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

  ## Version 6, for version 5 see the Wiki
  
  # connecting to the Opal servers

  require('DSI')
  require('DSOpal')
  require('dsBaseClient')

  builder &lt;- DSI::newDSLoginBuilder()
  builder$append(server = "study1", 
                 url = "http://192.168.56.100:8080/", 
                 user = "administrator", password = "datashield_test&amp;", 
                 table = "CNSIM.CNSIM1", driver = "OpalDriver")
  builder$append(server = "study2", 
                 url = "http://192.168.56.100:8080/", 
                 user = "administrator", password = "datashield_test&amp;", 
                 table = "CNSIM.CNSIM2", driver = "OpalDriver")
  builder$append(server = "study3",
                 url = "http://192.168.56.100:8080/", 
                 user = "administrator", password = "datashield_test&amp;", 
                 table = "CNSIM.CNSIM3", driver = "OpalDriver")
  logindata &lt;- builder$build()
  
  connections &lt;- DSI::datashield.login(logins = logindata, assign = TRUE, symbol = "D") 
  
  # Example 1: recode the levels of D$GENDER
  ds.recodeValues(var.name = "D$GENDER", 
                  values2replace.vector = c(0,1), 
                  new.values.vector = c(10,20),
                  newobj = 'gender_recoded',
                  datasources = connections)
                  
  # Example 2: recode NAs in D$PM_BMI_CATEGORICAL          
  ds.recodeValues(var.name = "D$PM_BMI_CATEGORICAL", 
                  values2replace.vector = c(1,2), 
                  new.values.vector = c(1,2),
                  missing = 99, 
                  newobj = 'bmi_recoded'
                  datasources = connections)
                 
  # Clear the Datashield R sessions and logout                 
  datashield.logout(connections) 
  

## End(Not run)   
</code></pre>

<hr /><div style="text-align: center;">[Package <em>dsBaseClient</em> version 6.3.0 ]</div>
</div>
</body></html>
